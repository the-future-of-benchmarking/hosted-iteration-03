(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[9],{131:function(e,t,a){e.exports=a.p+"static/media/scale.fde08841.jpeg"},147:function(e,t,a){"use strict";a.r(t);var r=a(2),n=a.n(r),s=a(21),c=a(5),l=a(3),o=a(4),i=a(37),u=a(27),m=a(26),d=a(0),p=a.n(d),h=a(61),b=a(58),E=a(114),g=a(116),v=a(115),f=a(39),w=a.n(f),C=a(59),N=a(33),k=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var r;return Object(l.a)(this,a),(r=t.call(this,e)).addContract=function(){var e=Object(c.a)(n.a.mark((function e(t){var a,s,c,l,o,i,u,m,d,p,h,b,E,g,v,f,k;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(w.a.utils.isAddress(t)){e.next=6;break}console.error("No adress"),r.props.showError("Konnte nicht hinzugef\xfcgt werden - Addresse nicht valide"),r.setState({contractInput:""}),e.next=46;break;case 6:return e.prev=6,a=new C.a(r.props.web3,t),e.next=10,N.a.getItem(t);case 10:if(e.sent){e.next=26;break}return e.next=13,a.getDetails();case 13:return s=e.sent,c=s.name,l=s.description,o=s.entries,i=s.sum,u=s.upper_bound,m=s.lower_bound,d=s.unit,e.next=23,N.a.addItem({name:c,description:l,entries:o,sum:i,upper_bound:u,lower_bound:m,unit:d,address:t});case 23:r.setState({contractInput:""}),e.next=40;break;case 26:return e.next=28,a.getDetails();case 28:return p=e.sent,h=p.name,b=p.description,E=p.entries,g=p.sum,v=p.upper_bound,f=p.lower_bound,k=p.unit,e.next=38,N.a.updateItem({name:h,description:b,entries:E,sum:g,upper_bound:v,lower_bound:f,unit:k,address:t});case 38:r.setState({contractInput:""}),window.location.reload();case 40:e.next=46;break;case 42:e.prev=42,e.t0=e.catch(6),r.props.showError("Adresse konnte nicht gefunden werden"),r.setState({contractInput:""});case 46:case"end":return e.stop()}}),e,null,[[6,42]])})));return function(t){return e.apply(this,arguments)}}(),r.state={contractInput:""},r.factory=new C.b(e.web3),r.addContract=r.addContract.bind(Object(i.a)(r)),r}return Object(o.a)(a,[{key:"render",value:function(){var e=this;return p.a.createElement("div",{className:"p-inputgroup p-mt-5"},p.a.createElement(E.Button,{label:"Add",onClick:function(){return e.addContract(e.state.contractInput)}}),p.a.createElement("span",{className:"p-float-label"},p.a.createElement(g.InputText,{id:"contract",value:this.state.contractInput,onChange:function(t){return e.setState({contractInput:t.target.value})}}),p.a.createElement("label",{htmlFor:"contract"},"Contract")))}}]),a}(d.Component),O=function(e){var t=e.loadBenchmark,a=e.smartContractAddress,r=e.web3,l=e.showError,o=Object(d.useState)(!0),i=Object(s.a)(o,2),u=i[0],m=i[1],h=Object(d.useState)([]),g=Object(s.a)(h,2),f=g[0],w=g[1],C=function(){var e=Object(c.a)(n.a.mark((function e(){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.a.purge();case 2:w([]);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),O=function(){var e=Object(c.a)(n.a.mark((function e(a){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t(a);case 2:m(!u);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(d.useEffect)((function(){N.a.getAll().then((function(e){w(e)}))}),[]),p.a.createElement(b.Card,{title:"Gespeicherte Smart Contracts",className:"p-mb-4 p-mt-4"},p.a.createElement("div",{className:"p-mb-4"},u?p.a.createElement("i",{className:"pi pi-angle-up",onClick:function(){return m(!u)},style:{cursor:"pointer"}}):p.a.createElement("i",{className:"pi pi-angle-down",onClick:function(){return m(!u)},style:{cursor:"pointer"}})),u?p.a.createElement(p.a.Fragment,null,p.a.createElement("div",{className:"p-grid p-dir-col"},0===f.length?"No entries (add existing contracts via the form below or create one)":f&&f.map((function(e){return p.a.createElement("div",{className:"p-col",style:{cursor:"pointer"},key:e.address,onClick:function(){return O(e.address)}},p.a.createElement(v.Chip,{template:p.a.createElement(p.a.Fragment,null,e.name," - ",e.address),style:{backgroundColor:a===e.address?"#00BCD4":"",color:a===e.address?"white":""}}))}))),p.a.createElement(k,{loadBenchmark:t,smartContractAddress:a,web3:r,showError:l}),p.a.createElement(E.Button,{label:"Delete",icon:"pi pi-trash",className:"p-button-danger p-mt-3",onClick:function(){return C()}})):"")},j=a(124),x=function(e){var t=e.smartContractAddress,a=(e.showError,e.details,Object(d.useState)(null)),r=Object(s.a)(a,2),n=r[0],c=r[1],l=Object(d.useState)(!0),o=Object(s.a)(l,2),i=o[0],u=o[1];return N.a.getItem(t).then((function(e){return c(e)})),n?p.a.createElement(b.Card,{title:"Benchmark Informationen",className:"p-mb-4 p-mt-4"},p.a.createElement("div",{className:"p-mb-4"},i?p.a.createElement("i",{className:"pi pi-angle-up",onClick:function(){return u(!i)},style:{cursor:"pointer"}}):p.a.createElement("i",{className:"pi pi-angle-down",onClick:function(){return u(!i)},style:{cursor:"pointer"}})),i?p.a.createElement("div",{className:"p-grid"},t?p.a.createElement(p.a.Fragment,null,p.a.createElement("div",{className:"p-col-4"},p.a.createElement("p",null,"Smart Contract Name")),p.a.createElement("div",{className:"p-col-8"},n.name?p.a.createElement("p",null,n.name):p.a.createElement("p",null,"Nicht gesetzt")),p.a.createElement("div",{className:"p-col-4"},p.a.createElement("p",null,"Smart Contract Beschreibung")),p.a.createElement("div",{className:"p-col-8"},n.description?p.a.createElement("p",null,n.description):p.a.createElement("p",null,"Nicht gesetzt")),p.a.createElement("div",{className:"p-col-4"},p.a.createElement("p",null,"Smart Contract Adresse")),p.a.createElement("div",{className:"p-col-8"},t?p.a.createElement(v.Chip,{template:t}):p.a.createElement("p",null,'"Nicht gesetzt"')),p.a.createElement("div",{className:"p-col-4"},p.a.createElement("p",null,"Einheit")),p.a.createElement("div",{className:"p-col-8"},n.unit?p.a.createElement(v.Chip,{template:n.unit}):p.a.createElement("p",null,'"Keine Einheit gesetzt"')),p.a.createElement("div",{className:"p-col-4"},p.a.createElement("p",null,"Grenzen")),n.lower_bound&&n.upper_bound?p.a.createElement(p.a.Fragment,null,p.a.createElement("div",{className:"p-col-4"},p.a.createElement(j.Knob,{value:n.lower_bound,min:n.lower_bound>=0?n.lower_bound:0,max:n.lower_bound<0?0:n.upper_bound,readOnly:!0,showValue:n.upper_bound.toString().length<5&&n.lower_bound.toString().length<5}),n.upper_bound.toString().length>5||n.lower_bound.toString().length>5?n.lower_bound.toLocaleString("de-DE"):"","\xa0",p.a.createElement("p",null,"Mindestwert")),p.a.createElement("div",{className:"p-col-4"},p.a.createElement(j.Knob,{value:n.upper_bound,min:n.lower_bound>=0?n.lower_bound:0,max:n.upper_bound,readOnly:!0,showValue:n.upper_bound.toString().length<5&&n.lower_bound.toString().length<5}),n.upper_bound.toString().length>5||n.lower_bound.toString().length>5?n.upper_bound.toLocaleString("de-DE"):"","\xa0",p.a.createElement("p",null,"Maximalwert"))):p.a.createElement("div",{className:"p-col-8"},p.a.createElement("p",null,"Nicht gesetzt"))):p.a.createElement("div",{className:"p-col-12"},"SmartContract nicht geladen, bitte oben selektieren")):""):p.a.createElement("p",null,"Loading...")},y=a(23),A=a(118),S=a(127),I=a(129),_=a(47),R=a(131),D=a.n(R),B=function(e){var t=e.average,a=e.unit,r=e.participants,n=e.entry,s=e.ratingValue,c=p.a.createElement("p",null,"\u2205 ",t," ",a),l=p.a.createElement("p",null,"Eigener Eintrag (lokal zwischengespeichert): ",n),o=p.a.createElement("p",null,"Differenz: ",n>t?"+":"-"," ",Math.abs(t-n)),i=p.a.createElement(p.a.Fragment,null,p.a.createElement(S.Rating,{value:s,readOnly:!0,cancel:!1,stars:5}),"\xa0(Gemessen am Durchschnitt)"),u=p.a.createElement("p",null,"Teilnehmende: ",r);return p.a.createElement(b.Card,{title:"Benchmark Resultate",className:"p-mt-2"},p.a.createElement("div",{className:"p-grid"},p.a.createElement("div",{className:"p-col-5"},p.a.createElement("img",{src:D.a,alt:"Skala"})),p.a.createElement("div",{className:"p-col-7"},p.a.createElement("div",{className:"p-grid p-dir-col"},p.a.createElement("div",{className:"p-col"},p.a.createElement(v.Chip,{template:u})),p.a.createElement("div",{className:"p-col"},p.a.createElement(v.Chip,{template:i})),p.a.createElement("div",{className:"p-col"},p.a.createElement(v.Chip,{template:c})," "),p.a.createElement("div",{className:"p-col"},p.a.createElement(v.Chip,{template:l})," "),p.a.createElement("div",{className:"p-col"},p.a.createElement(v.Chip,{style:{backgroundColor:n>t?"#4caf50":"#F57C00",color:"#ffffff"},template:o})," ")))))},M=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var r;return Object(l.a)(this,a),(r=t.call(this,e)).showInfo=function(e){r.toast.current.show({severity:"info",summary:"Info",detail:e,life:5e3})},r.requestResults=Object(c.a)(n.a.mark((function e(){var t,a,s,c,l,o,i,u,m,d;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r.client.getDetails(!0);case 3:return t=e.sent,e.next=6,N.a.getItem(r.props.smartContractAddress);case 6:return a=e.sent,console.log("Detz",t,a),e.next=10,r.client.getResults(a.contribution);case 10:return s=e.sent,c=s.average,l=s.averageRated,e.next=15,N.a.getItem(r.props.smartContractAddress);case 15:return o=e.sent,i=o.actualized,u=o.unit,m=o.contribution,console.log({average:c,averageRated:l},{actualized:i,unit:u,contribution:m}),r.setState({average:c,averageRated:l,lastRefresh:i,errorMessage:"",unit:u,participants:t.entries,entry:m}),console.log({average:c,averageRated:l,lastRefresh:i,errorMessage:"",unit:u,participants:t.entries,entry:m}),e.next=24,N.a.updateItem(Object(y.a)({average:c,averageRated:l},t));case 24:e.next=32;break;case 26:e.prev=26,e.t0=e.catch(0),d=C.a.decodeErrorMessage(e.t0),console.error(d),r.setState({errorMessage:d}),d.includes("Not enough people have participated")?r.setState({errorMessage:"Keine Ergebnisse - Nicht gen\xfcgend Teilnehmer"}):r.setState({errorMessage:d});case 32:case"end":return e.stop()}}),e,null,[[0,26]])}))),r.state={best:null,average:null,averageRated:null,lastRefresh:null},r.client=new C.a(r.props.web3,r.props.smartContractAddress),r.requestResults=r.requestResults.bind(Object(i.a)(r)),r.toast=p.a.createRef(),r.showInfo=r.showInfo.bind(Object(i.a)(r)),r}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=this;N.a.getItem(this.props.smartContractAddress).then((function(t){var a=t.actualized;return e.setState({lastRefresh:a})})),this.eventEmitter=this.client.getEmitter(),this.eventEmitter.on("data",(function(t){e.requestResults(),e.showInfo("New Results available")}))}},{key:"componentWillUnmount",value:function(){this.eventEmitter=null}},{key:"render",value:function(){var e=this;return p.a.createElement(b.Card,{title:"Ergebnisse",subTitle:"Letzte Aktualisierung: "+_.DateTime.fromISO(this.state.lastRefresh).toLocaleString(_.DateTime.DATETIME_MED)},p.a.createElement(h.Toast,{ref:this.toast}),this.state.errorMessage?p.a.createElement(I.Message,{severity:"error",text:this.state.errorMessage,className:"p-mb-3"}):"",p.a.createElement(E.Button,{label:"Ergebnisse laden",onClick:function(){return e.requestResults()}}),this.state.average&&this.state.averageRated&&!this.state.errorMessage&&p.a.createElement(B,{average:this.state.average,unit:this.state.unit,participants:this.state.participants,entry:this.state.entry,ratingValue:this.state.averageRated}))}}]),a}(d.Component),z=function(e){var t=e.smartContractAddress,a=e.showError,r=e.web3,l=Object(d.useState)(0),o=Object(s.a)(l,2),i=o[0],u=o[1],m=Object(d.useState)(null),h=Object(s.a)(m,2),g=h[0],v=h[1];Object(d.useEffect)((function(){N.a.getItem(t).then((function(e){return v(e)}))}),[t]);var f=function(){var e=Object(c.a)(n.a.mark((function e(c,l){var o,i,u,m,d,p;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r.eth.getAccounts();case 3:return o=e.sent,i=Object(s.a)(o,1),u=i[0],m=new C.a(r,c,u),e.next=9,m.participate(l);case 9:return e.next=11,m.getDetails();case 11:return d=e.sent,e.next=14,N.a.updateItem(Object(y.a)(Object(y.a)({},d),{},{contribution:l}));case 14:return e.next=16,N.a.getItem(t);case 16:p=e.sent,v(p),e.next=23;break;case 20:e.prev=20,e.t0=e.catch(0),a(C.a.decodeErrorMessage(e.t0));case 23:case"end":return e.stop()}}),e,null,[[0,20]])})));return function(t,a){return e.apply(this,arguments)}}();return g?p.a.createElement("div",{className:"p-fluid p-grid, p-formgrid"},p.a.createElement(b.Card,{title:"Benchmark Teilnahme",className:""},p.a.createElement("div",{className:"p-field p-col-12"},p.a.createElement("div",{className:"p-inputgroup"},p.a.createElement(E.Button,{label:"Contribute",onClick:function(){return"number"===typeof g.contribution?"":f(t,i)},disabled:"number"===typeof g.contribution}),p.a.createElement("span",{className:"p-float-label"},"number"!==typeof g.contribution?p.a.createElement(A.InputNumber,{id:"input",value:i,onChange:function(e){return u(e.value)},mode:"decimal",locale:"de-DE",minFractionDigits:2,min:+g.lower_bound,max:+g.upper_bound}):p.a.createElement(A.InputNumber,{value:g.contribution,mode:"decimal",locale:"de-DE",disabled:!0}),p.a.createElement("label",{htmlFor:"input"},"Benchmark Input ",g.unit?"(in ".concat(g.unit," )"):""))))),p.a.createElement("div",{className:"p-col-12"},"number"===typeof g.contribution?p.a.createElement(M,{smartContractAddress:t,smartContractParticipants:g.participants,smartContractResult:g.result,smartContractUnit:g.unit,smartContractEntry:g.contribution,ratingValue:g.rating,web3:r}):"")):p.a.createElement("p",null,"Loading...")},F=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var r;return Object(l.a)(this,a),(r=t.call(this,e)).showError=function(e){r.toast.current.show({severity:"error",summary:"Fehler",detail:e,life:5e3})},r.showInfo=function(e){r.toast.current.show({severity:"info",summary:"Info",detail:e,life:5e3})},r.state={smartContractAddress:null,smartContractInterface:null},r.loadBenchmark=r.loadBenchmark.bind(Object(i.a)(r)),r.toast=p.a.createRef(),r.validateAddress=r.validateAddress.bind(Object(i.a)(r)),r}return Object(o.a)(a,[{key:"validateAddress",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return!!this.props.web3.utils.isAddress(e)||(t&&this.showError("Adresse ist nicht valid!"),!1)}},{key:"loadBenchmark",value:function(){var e=Object(c.a)(n.a.mark((function e(t){var a,r,c,l,o;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.validateAddress(t)){e.next=18;break}return e.prev=1,e.next=4,this.props.web3.eth.getAccounts();case 4:return a=e.sent,r=Object(s.a)(a,1),c=r[0],l=new C.a(this.props.web3,t,c),e.next=10,l.getDetails();case 10:(o=e.sent)&&this.setState({smartContractAddress:t,smartContractDetails:o}),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(1),console.error(e.t0),this.showError(e.t0.message);case 18:case"end":return e.stop()}}),e,this,[[1,14]])})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){return p.a.createElement("div",{className:"p-grid"},p.a.createElement("div",{className:"p-col-5"},p.a.createElement(h.Toast,{ref:this.toast}),p.a.createElement(O,{loadBenchmark:this.loadBenchmark,smartContractAddress:this.state.smartContractAddress,showError:this.showError,web3:this.props.web3}),this.state.smartContractAddress?p.a.createElement(x,{smartContractAddress:this.state.smartContractAddress,details:this.state.smartContractDetails,showError:this.showError}):""),p.a.createElement("div",{className:"p-col-7"},this.state.smartContractAddress?p.a.createElement(z,{smartContractAddress:this.state.smartContractAddress,showError:this.showError,web3:this.props.web3}):p.a.createElement(p.a.Fragment,null)))}}]),a}(d.Component);t.default=F}}]);
//# sourceMappingURL=9.24f19983.chunk.js.map